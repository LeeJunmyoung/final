<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="edi">


	<select id="getDeptName" parameterType="int" resultType="String">
		select
		com_dept_name from
		(select DISTINCT com_dept_name,com_dept_num from
		members where com_dept_name
		is not null and com_num =#{com_num} order
		by com_dept_num)
	</select>


	<select id="getDeptMem" parameterType="hashmap"
		resultType="login.controller.LogOnDataBean">
		select * from members where com_num=#{com_num} and
		com_dept_name=#{com_dept_name} order by COM_pos_NUM
	</select>

	<select id="getMemberInfo" parameterType="int"
		resultType="login.controller.LogOnDataBean">
		select * from members where mem_num=#{mem_num}
	</select>


	<select id="getEDI_Table" parameterType="int" resultType="edi.db.EDI_DateBean">
		select * from (select * from EDI where com_num = #{com_num} order by
		edi_num DESC) where ROWNUM <![CDATA[ < ]]>6
	</select>


	<insert id="insertNewEDI" parameterType="edi.db.EDI_DateBean">
		insert into
		edi(edi_num,document_num,com_num,
		edi_subject,edi_textarea,mid_mem_num,
		mid_accept,fin_mem_num,
		fin_accept,send_dept_name,
		attachfile,draftdate)
		values(EDI_seq.nextval,#{document_num},
		#{com_num},#{EDI_Subject},
		#{EDI_TextArea},
		#{mid_mem_num},0,
		#{fin_mem_num},0,
		#{send_dept_name},#{attechFile}
		#{draftDate}
		)
	</insert>



</mapper>

